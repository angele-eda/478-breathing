<!doctype html>
<html lang="ko" translate="no">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>4-7-8 Breathing Timer | Breath24</title>
<meta name="description" content="4-7-8 breathing timer. Inhale 4 seconds, hold 7, exhale 8. Simple, calm, and distraction-free." />
<meta name="theme-color" content="#0b0f17" />
<link rel="canonical" href="https://breath24.com/breathing/4-7-8-breathing/" />

<style>
:root{
  --bg:#0b0f17;
  --text:#ffffff;
  --muted:rgba(255,255,255,.65);
  --line:rgba(255,255,255,.12);
  --circle:rgba(255,255,255,.05);
  --ease:cubic-bezier(.22,.9,.2,1);
  --size:min(72vw,420px);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:radial-gradient(800px 500px at 50% -10%,rgba(255,255,255,.06),transparent 60%),var(--bg);
  color:var(--text);
}
.top{
  position:sticky;top:0;
  backdrop-filter:blur(10px);
  background:rgba(0,0,0,.35);
  border-bottom:1px solid rgba(255,255,255,.05);
}
.top-inner{
  max-width:980px;
  margin:auto;
  padding:14px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.brand{
  display:flex;gap:10px;align-items:center;
}
.logo{
  width:32px;height:32px;border-radius:10px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--line);
}
.wrap{
  max-width:980px;
  margin:auto;
  padding:28px 18px 60px;
  text-align:center;
}
h1{margin:0;font-size:26px;font-weight:900;}
.desc{
  margin-top:10px;
  font-size:14px;
  color:var(--muted);
}
.stage{
  margin-top:30px;
  display:flex;
  justify-content:center;
}
.circle{
  width:var(--size);
  height:var(--size);
  border-radius:50%;
  background:var(--circle);
  border:1px solid var(--line);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  position:relative;
  transition:transform 220ms var(--ease);
}
.circle-inner{
  text-align:center;
  padding:20px;
}
.play{
  width:40px;height:40px;
  margin-bottom:10px;
  opacity:.6;
  transition:opacity .18s ease;
}
.count{
  font-size:80px;
  font-weight:900;
  margin:0;
}
.phase{
  font-size:14px;
  color:var(--muted);
  margin-top:6px;
}
.footer{
  margin-top:24px;
  font-size:13px;
  color:var(--muted);
}
details{
  margin-top:28px;
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  text-align:left;
  background:rgba(255,255,255,.03);
}
summary{
  cursor:pointer;
  font-weight:600;
}
input[type=number]{
  width:100%;
  padding:8px;
  margin-top:6px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--line);
  color:#fff;
  border-radius:10px;
}
button{
  padding:8px 12px;
  border-radius:10px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.05);
  color:#fff;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="top">
  <div class="top-inner">
    <div class="brand">
      <div class="logo"></div>
      <div>Breath24</div>
    </div>
    <div>4-7-8</div>
  </div>
</div>

<div class="wrap">
  <h1>4-7-8 Breathing</h1>
  <div class="desc">원을 터치하면 시작합니다. 들숨 4 · 멈춤 7 · 날숨 8</div>

  <div class="stage">
    <div class="circle" id="circle">
      <div class="circle-inner">
        <svg class="play" id="playIcon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.8">
          <polygon points="6,4 20,12 6,20" />
        </svg>
        <p class="count" id="count">—</p>
        <div class="phase" id="phase">Ready</div>
      </div>
    </div>
  </div>

  <details>
    <summary>Settings</summary>
    <label>Rounds
      <input type="number" id="rounds" min="1" max="20" value="6">
    </label>
    <div style="margin-top:10px;">
      <button id="reset">Reset</button>
    </div>
  </details>

  <div class="footer" id="doneText" style="display:none;">
    자연 호흡으로 돌아가세요.
  </div>
</div>

<script>
const pattern=[4,7,8];
let running=false;
let paused=false;
let round=1;
let phaseIndex=0;
let remaining=0;
let timer=null;

const circle=document.getElementById("circle");
const countEl=document.getElementById("count");
const phaseEl=document.getElementById("phase");
const playIcon=document.getElementById("playIcon");
const roundsInput=document.getElementById("rounds");
const doneText=document.getElementById("doneText");

function beep(){
  try{
    const ctx=new(window.AudioContext||window.webkitAudioContext)();
    const o=ctx.createOscillator();
    const g=ctx.createGain();
    o.type="sine";
    o.frequency.value=880;
    g.gain.value=.05;
    o.connect(g);
    g.connect(ctx.destination);
    o.start();
    setTimeout(()=>{o.stop();ctx.close();},120);
  }catch(e){}
}

function nextPhase(){
  phaseIndex++;
  if(phaseIndex>=pattern.length){
    phaseIndex=0;
    round++;
  }
  if(round>parseInt(roundsInput.value)){
    stop(true);
    return;
  }
  remaining=pattern[phaseIndex];
  updatePhaseLabel();
}

function updatePhaseLabel(){
  const labels=["들숨","멈춤","날숨"];
  phaseEl.textContent=labels[phaseIndex]+" · "+round+"/"+roundsInput.value;
}

function tick(){
  if(!running||paused)return;
  if(remaining<=0){
    beep();
    nextPhase();
  }else{
    remaining--;
    countEl.textContent=remaining;
  }
}

function start(){
  if(!running){
    running=true;
    paused=false;
    round=1;
    phaseIndex=0;
    remaining=pattern[0];
    updatePhaseLabel();
    countEl.textContent=remaining;
    playIcon.style.display="none";
    doneText.style.display="none";
    timer=setInterval(tick,1000);
  }else{
    paused=!paused;
    playIcon.style.display=paused?"block":"none";
  }
}

function stop(done=false){
  running=false;
  paused=false;
  clearInterval(timer);
  countEl.textContent="—";
  phaseEl.textContent=done?"Done":"Ready";
  playIcon.style.display="block";
  if(done) doneText.style.display="block";
}

circle.addEventListener("click",start);
document.getElementById("reset").addEventListener("click",()=>stop(false));
</script>
</body>
</html>